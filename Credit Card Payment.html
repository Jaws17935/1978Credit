<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¿¡ç”¨å¡è¨ˆç®—æ©Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 40px;
            max-width: 1000px;
            width: 100%;
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
        }

        .content-wrapper {
            display: flex;
            gap: 40px;
            align-items: flex-start;
        }

        .input-section {
            flex: 1;
            min-width: 300px;
        }

        .results-section {
            flex: 1;
            min-width: 300px;
        }

        @media (max-width: 768px) {
            .content-wrapper {
                flex-direction: column;
            }
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            color: #555;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 14px;
        }

        input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        /* ç§»é™¤æ•¸å­—è¼¸å…¥æ¡†çš„ç®­é ­ */
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        input[type="number"] {
            -moz-appearance: textfield;
            appearance: textfield;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .results {
            display: none;
        }

        .results.show {
            display: block;
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .results-table tr {
            border-bottom: 1px solid #f0f0f0;
        }

        .results-table tr:last-child {
            border-bottom: none;
        }

        .results-table td {
            padding: 12px 15px;
            font-size: 14px;
        }

        .results-table td:first-child {
            color: #666;
            font-weight: 600;
            width: 40%;
            background: #f8f9fa;
        }

        .results-table td:last-child {
            color: #333;
            font-weight: 700;
            text-align: right;
            font-size: 16px;
        }

        .results-table tr.highlight td:last-child {
            color: #667eea;
            font-size: 18px;
        }

        .results-table .info-text {
            color: #888;
            font-size: 11px;
            font-weight: normal;
            display: block;
            margin-top: 4px;
        }

        .currency-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }

        .currency-toggle label {
            margin-bottom: 0;
            font-size: 14px;
        }

        .toggle-buttons {
            display: flex;
            gap: 5px;
            background: #f0f0f0;
            border-radius: 8px;
            padding: 3px;
        }

        .toggle-btn {
            padding: 6px 15px;
            border: none;
            border-radius: 6px;
            background: transparent;
            color: #666;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .toggle-btn.active {
            background: #667eea;
            color: white;
        }

        .toggle-btn:hover {
            background: #e0e0e0;
        }

        .toggle-btn.active:hover {
            background: #5568d3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ’³ ä¿¡ç”¨å¡è¨ˆç®—æ©Ÿ</h1>
        
        <div class="content-wrapper">
            <div class="input-section">
                <div class="input-group">
                    <div class="currency-toggle">
                        <label for="totalInput">ç¸½é‡‘é¡</label>
                        <div class="toggle-buttons">
                            <button class="toggle-btn active" id="toggleRMB" onclick="switchCurrency('RMB')">RMB</button>
                            <button class="toggle-btn" id="toggleTWD" onclick="switchCurrency('TWD')">TWD</button>
                        </div>
                    </div>
                    <input type="number" id="totalInput" placeholder="è¼¸å…¥ç¸½é‡‘é¡" step="0.01" min="0">
                </div>

                <div class="input-group">
                    <label for="twd">å°å¹£æ‰£æ¬¾é‡‘é¡ (TWD)</label>
                    <input type="number" id="twd" placeholder="è¼¸å…¥å°å¹£æ‰£æ¬¾é‡‘é¡" step="0.01" min="0">
                </div>

                <div class="input-group">
                    <label for="fee">æ‰‹çºŒè²» (TWD)</label>
                    <input type="number" id="fee" placeholder="è¼¸å…¥æ‰‹çºŒè²»" step="0.01" min="0">
                </div>
            </div>

            <div class="results-section">
                <div class="results" id="results">
                    <table class="results-table">
                <tr>
                    <td>æœªå«æ‰‹çºŒè²»åŒ¯ç‡</td>
                    <td>
                        <span id="rateWithoutFee">-</span>
                        <span class="info-text">1 äººæ°‘å¹£ = <span id="rateWithoutFeeText">-</span> å°å¹£</span>
                    </td>
                </tr>
                <tr class="highlight">
                    <td>å¯¦å«æ‰‹çºŒè²»åŒ¯ç‡</td>
                    <td>
                        <span id="rateWithFee">-</span>
                        <span class="info-text">1 äººæ°‘å¹£ = <span id="rateWithFeeText">-</span> å°å¹£ï¼ˆå¯¦éš›æˆæœ¬ï¼‰</span>
                    </td>
                </tr>
                <tr>
                    <td>å¯¦éš›å«æ‰‹çºŒè²»ç¸½é‡‘é¡</td>
                    <td>
                        <span id="totalPaymentAmount">-</span>
                        <span class="info-text">å°å¹£æ‰£æ¬¾ + æ‰‹çºŒè²»</span>
                    </td>
                </tr>
                <tr class="highlight" id="conversionItem" style="display: none;">
                    <td id="conversionLabel">å¯¦éš›äººæ°‘å¹£ç¸½é‡‘é¡</td>
                    <td>
                        <span id="conversionAmount">-</span>
                        <span class="info-text" id="conversionInfo">-</span>
                    </td>
                </tr>
                <tr class="highlight" id="totalCalculationItem" style="display: none;">
                    <td>å¯¦éš›éœ€åˆ·å¡æ¬¡æ•¸</td>
                    <td>
                        <span id="cardCount">-</span>
                        <span class="info-text">æ¯æ¬¡200äººæ°‘å¹£ï¼Œå…±éœ€ <span id="cardCountText">-</span> æ¬¡</span>
                    </td>
                </tr>
                <tr class="highlight" id="totalPaymentItem" style="display: none;">
                    <td id="totalPaymentLabel">ç¸½æ”¯ä»˜é‡‘é¡</td>
                    <td>
                        <span id="totalPayment">-</span>
                        <span class="info-text" id="totalPaymentInfo">ç¸½å…±éœ€è¦æ”¯ä»˜çš„å°å¹£é‡‘é¡</span>
                    </td>
                </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentCurrency = 'RMB'; // ç•¶å‰é¸æ“‡çš„å¹£åˆ¥

        function switchCurrency(currency) {
            currentCurrency = currency;
            // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
            document.getElementById('toggleRMB').classList.toggle('active', currency === 'RMB');
            document.getElementById('toggleTWD').classList.toggle('active', currency === 'TWD');
            // æ›´æ–°è¼¸å…¥æ¡†placeholder
            const input = document.getElementById('totalInput');
            if (currency === 'RMB') {
                input.placeholder = 'è¼¸å…¥ç¸½é‡‘é¡ï¼ˆæ¯æ¬¡200äººæ°‘å¹£ï¼‰';
            } else {
                input.placeholder = 'è¼¸å…¥å°å¹£ç¸½é‡‘é¡';
            }
            // é‡æ–°è¨ˆç®—
            calculate();
        }

        function calculate() {
            // äººæ°‘å¹£é‡‘é¡å›ºå®šç‚º200
            const rmb = 200;
            // ç²å–è¼¸å…¥å€¼
            const twd = parseFloat(document.getElementById('twd').value);
            const fee = parseFloat(document.getElementById('fee').value) || 0;
            const totalInput = parseFloat(document.getElementById('totalInput').value);

            // é©—è­‰åŸºæœ¬è¼¸å…¥ï¼ˆå°å¹£æ‰£æ¬¾æ˜¯å¿…éœ€çš„ï¼‰
            if (!twd || twd <= 0) {
                // å¦‚æœåŸºæœ¬è¼¸å…¥ä¸å®Œæ•´ï¼Œéš±è—çµæœ
                document.getElementById('results').classList.remove('show');
                return;
            }

            // è¨ˆç®—ç¸½é‡‘é¡
            const totalAmount = twd + fee;

            // è¨ˆç®—ä¸å«æ‰‹çºŒè²»çš„åŒ¯ç‡
            const rateWithoutFee = twd / rmb;

            // è¨ˆç®—å«æ‰‹çºŒè²»çš„å¯¦éš›æˆæœ¬
            const rateWithFee = totalAmount / rmb;

            // é¡¯ç¤ºçµæœ
            document.getElementById('rateWithoutFee').textContent = rateWithoutFee.toFixed(4) + ' TWD';
            document.getElementById('rateWithoutFeeText').textContent = rateWithoutFee.toFixed(4);
            
            document.getElementById('rateWithFee').textContent = rateWithFee.toFixed(4) + ' TWD';
            document.getElementById('rateWithFeeText').textContent = rateWithFee.toFixed(4);
            
            document.getElementById('totalPaymentAmount').textContent = totalAmount.toFixed(2) + ' TWD';

            // è™•ç†ç¸½é‡‘é¡è¼¸å…¥
            if (totalInput && totalInput > 0) {
                if (currentCurrency === 'RMB') {
                    // è¼¸å…¥çš„æ˜¯äººæ°‘å¹£ï¼Œè¨ˆç®—éœ€è¦å¤šå°‘å°å¹£
                    // åˆ·å¡æ¬¡æ•¸ï¼ˆæ¯æ¬¡200äººæ°‘å¹£çš„é™åˆ¶ï¼‰
                    const perCardRmb = 200;
                    const cardCount = Math.ceil(totalInput / perCardRmb);
                    // ç¸½æ”¯ä»˜é‡‘é¡ç›´æ¥æŒ‰ç¸½é‡‘é¡è¨ˆç®—ï¼ˆä¸ä½¿ç”¨200çš„å€æ•¸ï¼‰
                    const totalPayment = totalInput * rateWithFee;

                    // é¡¯ç¤ºåˆ·å¡æ¬¡æ•¸å’Œç¸½æ”¯ä»˜é‡‘é¡
                    document.getElementById('cardCount').textContent = cardCount + ' æ¬¡';
                    document.getElementById('cardCountText').textContent = cardCount;
                    
                    // RMBæ¨¡å¼ä¸‹é¡¯ç¤ºç¸½æ”¯ä»˜é‡‘é¡
                    document.getElementById('totalPaymentLabel').textContent = 'ç¸½æ”¯ä»˜é‡‘é¡';
                    document.getElementById('totalPayment').textContent = totalPayment.toFixed(2) + ' TWD';
                    document.getElementById('totalPaymentInfo').textContent = 'ç¸½å…±éœ€è¦æ”¯ä»˜çš„å°å¹£é‡‘é¡';

                    // é¡¯ç¤ºç¸½é‡‘é¡è¨ˆç®—çµæœ
                    document.getElementById('totalCalculationItem').style.display = 'table-row';
                    document.getElementById('totalPaymentItem').style.display = 'table-row';
                    document.getElementById('conversionItem').style.display = 'none';
                } else {
                    // è¼¸å…¥çš„æ˜¯å°å¹£ï¼Œè¨ˆç®—å¯ä»¥æ›ç®—æˆå¤šå°‘äººæ°‘å¹£
                    // ä½¿ç”¨å«æ‰‹çºŒè²»çš„å¯¦éš›æˆæœ¬ä¾†è¨ˆç®—
                    const convertedRmb = totalInput / rateWithFee;
                    const perCardRmb = 200;
                    const cardCount = Math.ceil(convertedRmb / perCardRmb);
                    const actualPayment = cardCount * totalAmount;
                    // è¨ˆç®—å·®é¡ï¼ˆå¯¦éš›æ”¯ä»˜é‡‘é¡ - ç”¨æˆ¶è¼¸å…¥çš„å°å¹£ç¸½é‡‘é¡ï¼‰
                    const difference = actualPayment - totalInput;

                    // é¡¯ç¤ºæ›ç®—çµæœ
                    document.getElementById('conversionLabel').textContent = 'å¯¦éš›äººæ°‘å¹£ç¸½é‡‘é¡';
                    document.getElementById('conversionAmount').textContent = convertedRmb.toFixed(2) + ' RMB';
                    document.getElementById('conversionInfo').textContent = totalInput.toFixed(2) + ' å°å¹£å¯æ›ç®— ' + convertedRmb.toFixed(2) + ' äººæ°‘å¹£';

                    // é¡¯ç¤ºåˆ·å¡æ¬¡æ•¸å’Œå·®é¡
                    document.getElementById('cardCount').textContent = cardCount + ' æ¬¡';
                    document.getElementById('cardCountText').textContent = cardCount;
                    
                    // TWDæ¨¡å¼ä¸‹é¡¯ç¤ºå·®é¡
                    document.getElementById('totalPaymentLabel').textContent = 'æœ¬æ¬¡æ”¯ä»˜å¯¦éš›å·®é¡';
                    document.getElementById('totalPayment').textContent = difference.toFixed(2) + ' TWD';
                    if (difference >= 0) {
                        document.getElementById('totalPaymentInfo').textContent = 'å¯¦éš›æ”¯ä»˜ ' + actualPayment.toFixed(2) + ' å°å¹£ï¼Œéœ€é¡å¤–æ”¯ä»˜ ' + difference.toFixed(2) + ' å°å¹£';
                    } else {
                        document.getElementById('totalPaymentInfo').textContent = 'å¯¦éš›æ”¯ä»˜ ' + actualPayment.toFixed(2) + ' å°å¹£ï¼Œå¯é€€å› ' + Math.abs(difference).toFixed(2) + ' å°å¹£';
                    }

                    // é¡¯ç¤ºæ‰€æœ‰çµæœ
                    document.getElementById('conversionItem').style.display = 'table-row';
                    document.getElementById('totalCalculationItem').style.display = 'table-row';
                    document.getElementById('totalPaymentItem').style.display = 'table-row';
                }
            } else {
                // éš±è—æ‰€æœ‰ç¸½é‡‘é¡ç›¸é—œçµæœ
                document.getElementById('totalCalculationItem').style.display = 'none';
                document.getElementById('totalPaymentItem').style.display = 'none';
                document.getElementById('conversionItem').style.display = 'none';
            }

            // é¡¯ç¤ºçµæœå€åŸŸ
            document.getElementById('results').classList.add('show');
        }

        // ç‚ºæ‰€æœ‰è¼¸å…¥æ¡†æ·»åŠ å³æ™‚è¨ˆç®—åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = ['twd', 'fee', 'totalInput'];
            inputs.forEach(function(inputId) {
                const input = document.getElementById(inputId);
                if (input) {
                    input.addEventListener('input', calculate);
                }
            });
        });
    </script>
</body>
</html>

